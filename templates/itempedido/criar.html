{%extends "_base.html"%}
{% block content %}
    <form method="post" action="">
        {%csrf_token%}
        {{form.as_p}}
        <input type="reset" value="Cancelar" class="btn btn-outline-warning btn-sm"//>
        <input type="submit" value="Salvar" class="btn btn-outline-success btn-sm"/>
    </form>
    
{%endblock%}

<script>
document.addEventListener("DOMContentLoaded", function() {
    // Captura o texto de erro que o Django exibiu (se existir)
    let bodyText = document.body.innerText;
    
    // Procura a mensagem específica de estoque insuficiente
    let match = bodyText.match(/Estoque insuficiente.*Disponível: \d+/);

    if (match) {
        let errorMessage = match[0];

        // Exibe no box de erro no topo do formulário
        let errorBox = document.getElementById("error-box");
        errorBox.innerText = errorMessage;
        errorBox.style.display = "block";
    }
});
</script>
